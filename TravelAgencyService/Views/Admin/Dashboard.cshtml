@model TravelAgencyService.Models.ViewModels.AdminDashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
}

<div class="container-fluid">
    <h1 class="mb-4"><i class="bi bi-speedometer2"></i> Admin Dashboard</h1>

    <!-- Stats Cards -->
    <div class="row mb-4">
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="bi bi-airplane fs-1"></i>
                    <h3 class="mt-2">@Model.TotalTrips</h3>
                    <p class="mb-0">Total Trips</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-success text-white">
                <div class="card-body text-center">
                    <i class="bi bi-people fs-1"></i>
                    <h3 class="mt-2">@Model.TotalUsers</h3>
                    <p class="mb-0">Users</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-info text-white">
                <div class="card-body text-center">
                    <i class="bi bi-calendar-check fs-1"></i>
                    <h3 class="mt-2">@Model.TotalBookings</h3>
                    <p class="mb-0">Bookings</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-warning text-dark">
                <div class="card-body text-center">
                    <i class="bi bi-hourglass-split fs-1"></i>
                    <h3 class="mt-2">@Model.PendingBookings</h3>
                    <p class="mb-0">Pending</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-secondary text-white">
                <div class="card-body text-center">
                    <i class="bi bi-clock-history fs-1"></i>
                    <h3 class="mt-2">@Model.TotalWaitingList</h3>
                    <p class="mb-0">Waiting List</p>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-dark text-white">
                <div class="card-body text-center">
                    <i class="bi bi-currency-dollar fs-1"></i>
                    <h3 class="mt-2">$@Model.TotalRevenue.ToString("N0")</h3>
                    <p class="mb-0">Revenue</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-lightning"></i> Quick Actions</h5>
                </div>
                <div class="card-body">
                    <a asp-action="CreateTrip" class="btn btn-primary me-2">
                        <i class="bi bi-plus-circle"></i> Add New Trip
                    </a>
                    <a asp-action="ManageTrips" class="btn btn-outline-primary me-2">
                        <i class="bi bi-airplane"></i> Manage Trips
                    </a>
                    <a asp-action="ManageUsers" class="btn btn-outline-success me-2">
                        <i class="bi bi-people"></i> Manage Users
                    </a>
                    <a asp-action="ManageBookings" class="btn btn-outline-info me-2">
                        <i class="bi bi-calendar-check"></i> Manage Bookings
                    </a>
                    <a asp-action="WaitingList" class="btn btn-outline-warning">
                        <i class="bi bi-hourglass"></i> Waiting Lists
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Recent Bookings -->
        <div class="col-md-7">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="bi bi-clock-history"></i> Recent Bookings</h5>
                    <a asp-action="ManageBookings" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="card-body">
                    @if (Model.RecentBookings.Any())
                    {
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Trip</th>
                                    <th>Date</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var booking in Model.RecentBookings)
                                {
                                    <tr>
                                        <td>@booking.UserName</td>
                                        <td>@booking.TripName</td>
                                        <td>@booking.BookingDate.ToString("MMM dd")</td>
                                        <td>$@booking.TotalPrice</td>
                                        <td>
                                            @switch (booking.Status)
                                            {
                                                case TravelAgencyService.Models.BookingStatus.Confirmed:
                                                    <span class="badge bg-success">Confirmed</span>
                                                    break;
                                                case TravelAgencyService.Models.BookingStatus.Pending:
                                                    <span class="badge bg-warning">Pending</span>
                                                    break;
                                                case TravelAgencyService.Models.BookingStatus.Cancelled:
                                                    <span class="badge bg-danger">Cancelled</span>
                                                    break;
                                                default:
                                                    <span class="badge bg-secondary">@booking.Status</span>
                                                    break;
                                            }
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                    else
                    {
                        <p class="text-muted text-center">No bookings yet</p>
                    }
                </div>
            </div>
        </div>

        <!-- Popular Trips -->
        <div class="col-md-5">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="bi bi-fire"></i> Popular Trips</h5>
                    <a asp-action="ManageTrips" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="card-body">
                    @if (Model.PopularTrips.Any())
                    {
                        <ul class="list-group list-group-flush">
                            @foreach (var trip in Model.PopularTrips)
                            {
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>@trip.PackageName</strong><br>
                                        <small class="text-muted">@trip.Destination</small>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-primary">@trip.TimesBooked bookings</span><br>
                                        <small class="text-muted">@trip.AvailableRooms rooms left</small>
                                    </div>
                                </li>
                            }
                        </ul>
                    }
                    else
                    {
                        <p class="text-muted text-center">No trips yet</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>