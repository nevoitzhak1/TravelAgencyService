@model TravelAgencyService.Models.ViewModels.BookingConfirmationViewModel?

@{
    ViewData["Title"] = "Booking Confirmed";

    // Peek כדי שההודעה תישאר גם ל-Home
    var successMsg = TempData.Peek("Success") as string;
    var isCart = (ViewBag.IsCartConfirmation as bool?) ?? false;
    var cartCount = ViewBag.ConfirmedBookingsCount?.ToString();
}

<div class="container mt-5">
    <div class="alert alert-success text-center">
        <h4 class="mb-3">✅ Booking Confirmed!</h4>

        @if (!string.IsNullOrEmpty(successMsg))
        {
            <p class="mb-2">@successMsg</p>
        }

        @if (isCart)
        {
            <p class="mb-2">
                <strong>@cartCount</strong> booking(s) confirmed.<br />
                You can find the details in your email and under
                <a asp-controller="Booking" asp-action="MyBookings" class="alert-link">My Bookings</a>.
            </p>
        }
        else if (Model != null)
        {
            <p class="mb-2">
                Package: <strong>@Model.PackageName</strong><br />
                Destination: <strong>@Model.Destination</strong>, <strong>@Model.Country</strong><br />
                Dates: <strong>@Model.StartDate.ToString("dd/MM/yyyy")</strong> - <strong>@Model.EndDate.ToString("dd/MM/yyyy")</strong>
            </p>

            <p class="mb-2">
                You can find the details in your email and under
                <a asp-controller="Booking" asp-action="MyBookings" class="alert-link">My Bookings</a>.
            </p>
        }

        <p class="text-muted mb-0">
            Redirecting to the home page...
        </p>
    </div>

    <div class="text-center mt-3">
        <a asp-controller="Home" asp-action="Index" class="btn btn-primary">Go to Home Now</a>
    </div>
</div>

<script>
    setTimeout(function () {
        window.location.href = '@Url.Action("Index", "Home")';
    }, 2000);
</script>
